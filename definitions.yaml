definitions:

  Cluster:
    type: object
    required:
      - id
    properties:
      name:
        type: string
        description: User-defined name for the cluster
      kubernetes_version:
        type: string
        description: Kubernetes version, e. g. 1.4.6
      owner:
        type: string
        description: ID of the organization owning the cluster
      workers:
        type: array
        description: Worker node objects
        items:
          $ref: '#/definitions/Node'
      masters:
        type: array
        description: Master node objects
        items:
          $ref: '#/definitions/Node'

  Node:
    type: object
    properties:
      memory:
        type: object
        properties:
          size_gb:
            type: string
            description: Memory size in GB
      storage:
        type: object
        properties:
          size_gb:
            type: string
            description: Storage size in GB
      cpu:
        type: object
        properties:
          cores:
            type: integer
            description: Number of CPU cores
      labels:
        description: Arbitrary labels to be applied as Kubernetes metadata
        type: object
        additionalProperties:
          type: string

  ClusterListItem:
    type: object
    required:
      - id
      - name
      - create_date
    properties:
      id:
        type: string
        description: Cluster ID
      name:
        type: string
        description: Cluster name
      create_date:
        type: string
        format: date-time
        description: Creation date/time

  Domain:
    type: object
    required:
      - domain
    properties:
      creation_date:
        type: string
        format: date-time
        description: Creation date and time
      domain:
        type: string
        description: Domain name
      last_validation_attempt_date:
        type: string
        format: date-time
        description: Last date/time the domain has been tried to validate
      organization:
        type: string
        description: The owning organization's ID
      status:
        type: string
        enum:
          - PENDING
          - VALIDATED
          - FAILED
        description: The domain's status
      validation_comment:
        type: string
        description: Additional info on the result of the last validation attempt
      validation_token:
        type: string
        description: Credentials for the validation of this domain

  # Common error object
  Error:
    type: object
    required:
     - code
     - message
    properties:
      message:
        type: string
      code:
        type: integer

  # User object
  User:
    type: object
    required:
     - id
     - email
    properties:
      id:
        type: string
        description: Unique identifier of the user
      created:
        type: string
        format: date-time
        description: Creation date and time of the user
      email:
        type: string
        format: email
        description: Email address of the user
      expiry:
        type: string
        format: date-time
        description: Date and time when the account will expire

  # Object used to create a new user
  NewUser:
    type: object
    required: ["email"]
    properties:
      email:
        type: string
        format: email
        description: Email address of the user
      expiry:
        type: string
        format: date-time
        description: Date and time when the account will expire
      password:
        type: string
        description: Base64 encoded password. If no password is given, a secure one will be generated but not exposed anywhere.

  # Model for updating a user
  UpdateUser:
    type: object
    properties:
      email:
        type: string
        format: email
        description: Email address of the user
      expiry:
        type: string
        format: date-time
        description: Date and time when the account will expire
      password:
        type: string
        description: Base64 encoded password

  Organization:
    type: object
    required:
      - id
      - created
      - members
    properties:
      id:
        type: string
      created:
        type: string
        format: date-time
        description: Creation date and time of the user
      members:
        type: array
        description: Array of membership objects
        items:
          $ref: '#/definitions/OrganizationMembership'

  OrganizationListItem:
    type: object
    required:
      - id
      - created
    properties:
      id:
        type: string
        description: Organization ID
      created:
        type: string
        format: date-time
        description: Creation date and time of the user

  OrganizationMembership:
    type: object
    required:
      - user_id
      - role
    properties:
      user_id:
        type: string
        description: User ID
      role:
        type: string
        description: Role name, e. g. `OWNER`, `MEMBER`
